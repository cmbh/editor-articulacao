<!DOCTYPE html>
<html>

<head>
    <script src="silegismg-editor-articulacao.js"></script>
</head>

<body>
    <button data-tipo-destino="titulo">Título</button>
    <button data-tipo-destino="capitulo">Capítulo</button>
    <button data-tipo-destino="secao">Seção</button>
    <button data-tipo-destino="subsecao">Subseção</button>
    <button data-tipo-destino="continuacao">Continuação</button>
    <button data-tipo-destino="artigo">Artigo</button>
    <button data-tipo-destino="paragrafo">Parágrafo</button>
    <button data-tipo-destino="inciso">Inciso</button>
    <button data-tipo-destino="alinea">Alínea</button>
    <button data-tipo-destino="item">Item</button>

    <pre id="contexto" style="float: right"></pre>
    <div id="articulacao" class="silegismg-articulacao">
        <p data-tipo="artigo">Primeiro</p>
        <p data-tipo="artigo">Segundo</p>
        <p data-tipo="inciso">Inciso 1 do caput</p>
        <p data-tipo="inciso">Inciso 2 do caput</p>
        <p data-tipo="paragrafo">Parágrafo</p>
        <p data-tipo="inciso">Inciso 1 do parágrafo</p>
        <p data-tipo="inciso">Inciso 2 do parágrafo</p>
        <p data-tipo="alinea">Alínea</p>
        <p data-tipo="item">Item</p>
        <p data-tipo="item">Outro item</p>
        <p data-tipo="artigo">Terceiro</p>
        <p data-tipo="artigo">Quarto</p>
        <p data-tipo="artigo">Quinto</p>
        <p data-tipo="artigo">Sexto</p>
        <p data-tipo="artigo">Sétimo</p>
        <p data-tipo="artigo">Oitavo</p>
        <p data-tipo="artigo">Nono</p>
        <p data-tipo="artigo">Décimo</p>
    </div>
    <hr>
    <pre id="lexml"></pre>
    <script>
        silegismgEditorArticulacao(document.getElementById('articulacao'));

        let botoes = document.querySelectorAll('button[data-tipo-destino]');

        for (let i = 0; i < botoes.length; i++) {
            botoes[i].onclick = function (event) {
                articulacao.ctrlArticulacao.alterarTipoDispositivoSelecionado(event.target.getAttribute('data-tipo-destino'));
                articulacao.focus();
            }
        }

        document.getElementById('articulacao').addEventListener('contexto', function(evento) {
            // Vamos atualizar os botões.
            for (let i = 0; i < botoes.length; i++) {
                botoes[i].disabled = !evento.detail.permissoes[botoes[i].getAttribute('data-tipo-destino')];
            }

            document.getElementById('contexto').innerText = JSON.stringify(evento.detail.cursor, null, 4)
            document.getElementById('lexml').innerText = articulacao.lexml.outerHTML.replace(/(<\/.+?>)/g, '$1\n');
        });
    </script>
</body>

</html>